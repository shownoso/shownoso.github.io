(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{209:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"ssh-免密登陆"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssh-免密登陆"}},[s._v("#")]),s._v(" SSH 免密登陆")]),s._v(" "),n("p",[s._v("通过 SSH 进行远程登录有两种方式。")]),s._v(" "),n("ul",[n("li",[s._v("第一种基于口令：每次登录都需要输入密码，即使 SSH 为传输的数据提供了可靠的加密，但是依然不能保证目标服务器就是真正想要连接的服务器。")]),s._v(" "),n("li",[s._v("第二种基于密钥对：创建一对密钥，将公钥放在服务器，私钥放在本地，公钥私钥匹配则认证成功。")])]),s._v(" "),n("p",[s._v("第二种方式即“免密登录”")]),s._v(" "),n("h2",{attrs:{id:"加密算法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#加密算法"}},[s._v("#")]),s._v(" 加密算法")]),s._v(" "),n("ol",[n("li",[s._v("对称加密： 加密和解密互为逆运算")]),s._v(" "),n("li",[s._v("不对称加密：加密和解密的运算方法不同。常用的不对称加密有 RSA、Elgamal、ECC 等。")])]),s._v(" "),n("h3",{attrs:{id:"rsa"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rsa"}},[s._v("#")]),s._v(" RSA")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/wjiabin/article/details/85228078",target:"_blank",rel:"noopener noreferrer"}},[s._v("算法原理"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"配置与使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置与使用"}},[s._v("#")]),s._v(" 配置与使用")]),s._v(" "),n("ol",[n("li",[s._v("生成密钥对")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v("  ~/.ssh\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -t：密钥类型 -C：识别该密钥的注释 -f：生成的文件名")]),s._v("\nssh-keygen -t rsa -C "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shownoso"')]),s._v(" -f "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shownoso_rsa"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 出现钥匙对密码提示 直接回车跳过")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前目录会有生成 公钥 shownoso_rsa.pub 和私钥 shownoso_rsa")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("上传公钥")])]),s._v(" "),n("p",[s._v("上传至服务器对应账号的/home（root用户则默认在/root）的/.ssh目录。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传公钥到目标服务器，（自动）写入 ~/ssh/authorized_keys")]),s._v("\nssh-copy-id -i shownoso_rsa.pub root@服务器ip/域名\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 追加公钥的方式")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat shownoso_rsa.pub >> authorized_keys")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置访问权限")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" shownoso_rsa.pub\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" authorized_keys\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("使用")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -i：指定私钥进行远程登录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -i ~/.ssh/shownoso_rsa root@服务器ip/域名\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("创建配置文件")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建配置文件并写入配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" config\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("配置示例")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 多主机配置")]),s._v("\nHost gateway-produce\nHostName "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IP或绑定的域名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nPort "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nHost node-produce\nHostName "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IP或绑定的域名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nPort "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nHost java-produce\nHostName "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IP或绑定的域名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nPort "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n\nHost *-produce "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#批量处理 ")]),s._v("\nUser root\nIdentityFile ~/.ssh/produce_key_rsa\nProtocol "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nCompression "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nServerAliveInterval "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\nServerAliveCountMax "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\nLogLevel INFO\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#单主机配置")]),s._v("\nHost "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("别名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nUser root\nHostName "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IP或绑定的域名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nIdentityFile ~/.ssh/shownoso_rsa\nProtocol "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nCompression "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nServerAliveInterval "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\nServerAliveCountMax "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\nLogLevel INFO\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("使用配置")])]),s._v(" "),n("p",[s._v("直接使用别名，假设 "),n("code",[s._v("Host shown")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" shown\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);